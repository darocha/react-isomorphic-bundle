<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>{{ head.title | safe }}</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="author" content="中華基督教網路發展協會 Chinese Christian Network Development Association" />
    <meta property="og:title" content="{{ head.title | safe }}" />
    <meta property="og:url" content="{{ pageUrl }}" />
    {{ head.meta | safe }}
    <meta property="og:image" content="{{ siteUrl }}/images/icon.png" />
    <link rel="alternate" type="application/atom+xml" title="RSS" href="{{ siteUrl }}/rss" />
    {% if env.NODE_ENV != 'development' %}
    {% for style in assets.style %}
    <link rel="stylesheet" href="{{ style }}" media="screen, projection" />
    {% endfor %}
    {% endif %}
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.2/outdatedbrowser.min.css" media="screen, projection" />
    {{ stateFromServer | safe }}
  </head>
  <body>
    <div id="outdated">
      <h6>您的瀏覽器已過時</h6>
      <p>要正常瀏覽本網站請升級您的瀏覽器。 <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/tw">現在升級​​</a></p>
      <p class="last"> <a href="#" id="btnCloseUpdateBrowser" title="關閉"> &times; </a> </p>
    </div>
    <div id="app">{{ appString | safe }}</div>
    <script src="//maps.google.com/maps/api/js?libraries=places&sensor=false"></script>
    {% if env.NODE_ENV == 'production' %}
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
    <script type="text/javascript">
      var headID = document.getElementsByTagName("head")[0];
      var cssNode = document.createElement('link');
      cssNode.type = 'text/css';
      cssNode.rel = 'stylesheet';
      cssNode.href = '/assets/fallback.css';
      cssNode.media = 'screen, projection';
      headID.appendChild(cssNode);
    </script>
    {% endif %}
    {% if env.NODE_ENV != 'debug' %}
    {% for script in assets.script %}
    <script src="{{ script }}"></script>
    {% endfor %}
    {% endif %}
    <script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.2/outdatedbrowser.min.js"></script>
    <script>
      //event listener form DOM ready
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload !== 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
            }
            func();
          }
        }
      }
      //call function after DOM ready
      addLoadEvent(function(){
        outdatedBrowser({
          bgColor: '#f25648',
          color: '#ffffff',
          lowerThan: 'transform',
          languagePath: ''
        })
      });
    </script>
  </body>
</html>
